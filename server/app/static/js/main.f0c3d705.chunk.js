(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[1],{152:function(e){e.exports=JSON.parse('{"name":"client","version":"0.1.0","homepage":"https://ec2-34-194-150-216.compute-1.amazonaws.com/mapfile-editor/app","private":true,"dependencies":{"@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","bootstrap":"^4.5.0","classnames":"^2.2.6","internal-nav-helper":"^3.1.0","monaco-editor-webpack-plugin":"^1.9.0","money-clip":"^3.0.2","node-sass":"^4.14.1","react":"^16.13.1","react-app-rewired":"^2.1.6","react-bootstrap":"^1.2.2","react-dom":"^16.13.1","react-monaco-editor":"^0.39.1","react-particles-js":"^3.2.1","react-scripts":"3.4.1","redux-bundler":"^27.0.2","redux-bundler-react":"^1.2.0"},"scripts":{"start":"react-app-rewired start","build":"react-app-rewired build","test":"react-app-rewired test","eject":"react-app-rewired eject","stage":"cp -R ./build/ ../server/app"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},337:function(e,t,n){e.exports=n(724)},496:function(e,t,n){},500:function(e,t,n){},501:function(e,t,n){},503:function(e,t,n){},504:function(e,t,n){},716:function(e,t,n){},717:function(e,t,n){},718:function(e,t,n){},721:function(e,t,n){},722:function(e,t,n){},724:function(e,t,n){"use strict";n.r(t);n(338);var a=n(6),o=n.n(a),i=n(145),r=n.n(i),l=n(146),c=n(166),s=n(167),d=n(121),u=n(173),p=n(175),E=n(319),m=n(128),f=n(179),h=n(227),g=n(171),v=n(113),b=n(248),O=n(247),T=n(332),S=(n(496),function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).editorDidMount=a.editorDidMount.bind(Object(d.a)(a)),a.onChange=a.onChange.bind(Object(d.a)(a)),a.onUpdate=a.onUpdate.bind(Object(d.a)(a)),a.onNameChange=a.onNameChange.bind(Object(d.a)(a)),a}return Object(s.a)(n,[{key:"editorDidMount",value:function(e,t){console.log("editorDidMount",e),e.focus()}},{key:"onNameChange",value:function(e){var t=e.target.value,n=this.props.editorContent;this.props.doEditorUpdate(t,n)}},{key:"onChange",value:function(e,t){var n=this.props.editorFilename;this.props.doEditorUpdate(n,e)}},{key:"onUpdate",value:function(e){var t=this.props.editorFilename;this.props.doEditorSave(t)}},{key:"render",value:function(){var e=this.props.editorContent,t=this.props.editorFilename,n=this.props.editorError,a=this.props.editorIsSaving;return o.a.createElement("div",null,t?o.a.createElement(O.a,{fluid:"md",className:"editor-container"},o.a.createElement(g.a,{className:"editor-row justify-content-md"},o.a.createElement(v.a,{md:{span:8.5,offset:-8}},o.a.createElement(h.a,{className:"editor-form"},o.a.createElement(h.a.Group,null,o.a.createElement(h.a.Label,{column:!0,lg:!0},o.a.createElement("h5",null," File Name : ",t)),o.a.createElement(v.a,{lg:"12"},o.a.createElement(h.a.Control,{type:"text",placeholder:t,value:t,onChange:this.onNameChange,isInvalid:n}),o.a.createElement(b.a.Feedback,{type:"invalid",tooltip:!0},"File ",o.a.createElement("strong",null,"Not Saved")," Please"," ",o.a.createElement("strong",null,"Rename the Filename..")))),o.a.createElement(f.a,{disabled:a,onClick:a?null:this.onUpdate,type:"submit"},"Save File"))," ",o.a.createElement("div",{className:"position-relative"},o.a.createElement(E.default,{width:"805px",height:"605px",language:"javascript",theme:"vs-dark",value:e,options:{selectOnLineNumbers:!0},onChange:this.onChange,editorDidMount:this.editorDidMount}))))):o.a.createElement("div",null,o.a.createElement(v.a,{md:!0},o.a.createElement(T.a,null,o.a.createElement("h5",null,"Open or add a new file to Edit")))))}}]),n}(o.a.Component)),y=Object(m.b)("selectEditorContent","selectEditorIsSaving","selectEditorFilename","selectEditorError","doEditorUpdate","doEditorPut","doEditorSave","doFilesFetch",S),C=n(215),_=n(282),D=n(331),R=n(281),I=n(280),F=n(320),A=n(29),N=n.n(A),k=n(321),j=n.n(k),U=n(322),L=n.n(U),w=n(206),P=n.n(w),x=(n(500),function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={enabled:e.enabledFromProps()},e.isEnabled=function(){return e.state.enabled},e.toggleSwitch=function(t){t.persist(),t.preventDefault();var n=e.props,a=n.onClick,o=n.onStateChanged;e.setState({enabled:!e.state.enabled},(function(){var n=e.state,i=Object.assign(t,{SWITCH_STATE:n});P()(a)&&a(i),P()(o)&&o(n)}))},e}return Object(s.a)(n,[{key:"enabledFromProps",value:function(){var e=this.props.enabled;return e=P()(e)?e():e,L()(e)&&e}},{key:"render",value:function(){var e=this.state.enabled,t=this.props,n=(t.enabled,t.theme),a=(t.onClick,t.className),i=(t.onStateChanged,Object(F.a)(t,["enabled","theme","onClick","className","onStateChanged"])),r=n&&j()(n)?n:"default",l=N()("switch switch--".concat(r),a),c=N()("switch-toggle","switch-toggle--".concat(e?"on":"off"));return o.a.createElement("div",Object.assign({className:l,onClick:this.toggleSwitch},i),o.a.createElement("div",{className:c}))}}]),n}(a.Component)),H=(n(501),function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onOpenTemplate=a.onOpenTemplate.bind(Object(d.a)(a)),a.onAddNewFile=a.onAddNewFile.bind(Object(d.a)(a)),a.onDeleteFile=a.onDeleteFile.bind(Object(d.a)(a)),a.onOpenFile=a.onOpenFile.bind(Object(d.a)(a)),a.toggleDelete=a.toggleDelete.bind(Object(d.a)(a)),a.onEnabled=a.onEnabled.bind(Object(d.a)(a)),a}return Object(s.a)(n,[{key:"onEnabled",value:function(e){return e}},{key:"onOpenTemplate",value:function(e){this.props.doEditorOpenTemplate()}},{key:"onOpenFile",value:function(e){this.props.doEditorOpen(e)}},{key:"onDeleteFile",value:function(e){this.props.doEditorDelete(e)}},{key:"onAddNewFile",value:function(){this.props.doEditorOpen()}},{key:"toggleDelete",value:function(e){var t=e.enabled;return this.onEnabled(t),!0===t?this.props.doEditorDelOn():this.props.doEditorDelOff()}},{key:"render",value:function(){var e=this,t=this.props.editorIsEditing,n=this.props.filesItems,a=this.props.editorIsDeleting;return console.log(a,"delete status"),o.a.createElement(D.a.Container,{id:"list-group-tabs-example",defaultActiveKey:"false"},o.a.createElement(v.a,null,o.a.createElement(C.a,{border:"info"},o.a.createElement(f.a,{variant:"info",className:"CardBtn",onClick:function(){e.onAddNewFile()}},"Add New File"),o.a.createElement(f.a,{variant:"dark",className:"CardBtn",onClick:function(){e.onOpenTemplate()}},"Use Template File"),o.a.createElement(C.a.Header,{as:"h4",className:"d-inline"},"Map Files"," ",o.a.createElement(R.a,{placement:"left",overlay:o.a.createElement(I.a,{id:"tooltip-left"},"Enable Delete")},o.a.createElement(x,{theme:"default",className:"d-flex",enabled:this.onEnabled,onStateChanged:this.toggleDelete}))),o.a.createElement(_.a,null,n.map((function(n,i){return o.a.createElement(R.a,{key:i,placement:"left",overlay:o.a.createElement(I.a,{id:"tooltip-left"}," ","Click on the filename to open the ",o.a.createElement("strong",null,"Editor"))},o.a.createElement(_.a.Item,{bsPrefix:"list-item",as:"a",disabled:t,active:t,variant:"light",action:!0,key:i,href:"#"+i,onClick:function(){e.onOpenFile(n.filename)}},o.a.createElement("h5",{className:"file"},n.filename),o.a.createElement(f.a,{key:i+"del",variant:"danger",className:"deleteBtn",onClick:function(){return e.onDeleteFile(n.filename)},disabled:a},"X")))}))))))}}]),n}(o.a.Component)),B=Object(m.b)("selectFilesItems","selectEditorIsEditing","selectEditorError","selectEditorIsDeleting","doEditorOpen","doEditorDelete","doEditorOpenTemplate","doEditorDelOn","doEditorDelOff",H),M=n(326);n(503);var z=function(){return o.a.createElement("div",null,o.a.createElement(M.a,{fluid:!0,className:"jumbo-edit"},o.a.createElement("h1",null,"Editor Page")),o.a.createElement(g.a,{className:"editor-row"},o.a.createElement(v.a,{md:!0,className:"monaco-col"},o.a.createElement(y,null)),o.a.createElement(v.a,{md:{span:4,offset:-8},className:"display-inline"},o.a.createElement(B,null))))},G=(n(504),function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return this.props.authIsLoggedIn?o.a.createElement("div",null,o.a.createElement("strong",null,"HELLO")," ",this.props.authName):o.a.createElement("div",null,o.a.createElement(f.a,{onClick:this.props.doAuthLogin},"Login with CAC"))}}]),n}(a.Component)),J=Object(m.b)("doAuthLogin","selectAuthIsLoggedIn","selectAuthName",G),W=n(327),V=n.n(W);n(716);var X=function(){return o.a.createElement(V.a,{className:"particles-js",params:{fpsLimit:28,particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:6,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"repulse"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0}})};n(717);var K=function(){return o.a.createElement("div",{className:"footer-container"},o.a.createElement(g.a,null,o.a.createElement(v.a,null,o.a.createElement("footer",{className:"footer"},o.a.createElement("span",null,o.a.createElement("strong",null,"MapFile Editor 2020"))))))};n(718);var Y=function(){return o.a.createElement("div",null,o.a.createElement(O.a,{className:"fluid-xl container-login"},o.a.createElement(g.a,{className:"justify-content-md-center login-row",xs:6,xl:4},o.a.createElement(v.a,{className:"align-self center display block login-col",xs:6,md:4},o.a.createElement(C.a,null,o.a.createElement(C.a.Header,{as:"h5"},"Login"),o.a.createElement(J,null))))),o.a.createElement(K,null),o.a.createElement(X,null))},q=Object(l.c)({"/":Y,"/login":Y,"/files":z,"/files/:filename":z,"*":Y},{routeInfoSelector:"selectPathnameMinusHomepage"}),Q={FETCH_SUCESS:"FETCH_SUCCESS",FETCH_START:"FETCH_START"},Z={name:"files",getReducer:function(){var e={apiRoot:"/mapfile-editor",items:[],shouldFetch:!0};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0,a=n.type,o=n.payload;return a===Q.FETCH_SUCESS||"FETCH_START"===a?Object.assign({},t,o):"EDITOR_PUT_SUCCESS"===a||"EDITOR_POST_SUCCESS"===a||"EDITOR_DELETE_SUCCESS"===a?Object.assign({},t,{shouldFetch:!0}):t}},doFilesFetch:function(){return function(e){var t=e.dispatch,n=e.store;Q||console.log(Q),t({type:"FETCH_START",payload:{shouldFetch:!1}});var a=n.selectFilesAPIRoot(),o=n.selectAuthToken();fetch("".concat(a,"/api/files"),{method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(o)}}).then((function(e){return e.json()})).then((function(e){t({type:Q.FETCH_SUCESS,payload:{items:e}})})).catch((function(e){console.log("files did not fetch",e)}))}},selectFilesAPIRoot:function(e){return e.files.apiRoot},selectFilesItems:function(e){return e.files.items},reactFilesShouldFetch:function(e){if(e.files.shouldFetch)return{actionCreator:"doFilesFetch"}}},$={name:"editor",getReducer:function(){var e={filename:null,content:null,isSaving:!1,isEditing:!1,isDeleting:null,isNew:!1,err:null};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0,a=n.type,o=n.payload;switch(a){case"EDITOR_ENABLE_DEL":case"EDITOR_DISABLE_DEL":case"EDITOR_FETCH_TEMPLATE":case"EDITOR_DELETE_SUCCESS":case"EDITOR_DELETE_ERROR":case"EDITOR_SAVE_STARTED":case"EDITOR_OPEN":case"EDITOR_POST_ERROR":case"EDITOR_POST_SUCCESS":case"EDITOR_PUT_ERROR":case"EDITOR_PUT_SUCCESS":case"EDITOR_SAVE":case"EDITOR_UPDATED":case"EDITOR_FETCH_SUCCESS":return Object.assign({},t,o);default:return t}}},doEditorOpen:function(e){return function(t){var n=t.dispatch,a=t.store;if(e){var o=a.selectAuthToken(),i=a.selectFilesAPIRoot();fetch("".concat(i,"/api/files/").concat(e),{method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(o)}}).then((function(e){return e.text()})).then((function(t){console.log(t),n({type:"EDITOR_FETCH_SUCCESS",payload:{filename:e,content:t,isNew:!1}})})).catch((function(e){console.log(" did not grab file content",e)}))}else n({type:"EDITOR_OPEN",payload:{filename:"NewFile.map",content:"//Start Here",isNew:!0}});a.doUpdateUrl("/files/".concat(e))}},doEditorOpenTemplate:function(){return function(e){var t=e.dispatch,n=e.store,a=n.selectAuthToken(),o=n.selectFilesAPIRoot();fetch("".concat(o,"/api/templates/").concat("template.mapx"),{method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return e.text()})).then((function(e){console.log("template",e),t({type:"EDITOR_FETCH_TEMPLATE",payload:{filename:"template.mapx",content:e,isNew:!0}})})).catch((function(e){console.log("template does not exist",e)})),n.doUpdateUrlWithHomepage("/files/".concat("template.mapx"))}},doEditorUpdate:function(e,t){return function(n){var a=n.dispatch;n.store;a({type:"EDITOR_UPDATED",payload:{filename:e,content:t,isEditing:!0}})}},doEditorDelOn:function(){return function(e){var t=e.dispatch;e.store;t({type:"EDITOR_DISABLE_DEL",payload:{isEditing:!0,isDeleting:!1}})}},doEditorDelOff:function(){return function(e){var t=e.dispatch;e.store;t({type:"EDITOR_ENABLE_DEL",payload:{isEditing:!1,isDeleting:!0}})}},doEditorDelete:function(e){return function(t){var n=t.dispatch,a=t.store,o=a.selectFilesAPIRoot(),i=a.selectAuthToken();fetch("".concat(o,"/api/files/").concat(e),{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:JSON.stringify({filename:e})}).then((function(e){return e.ok})).then((function(e){n(e?{type:"EDITOR_DELETE_SUCCESS",payload:{}}:{type:"EDITOR_DELETE_ERROR",payload:{}})})).catch((function(e){console.error(e)}))}},doEditorPut:function(e){return function(t){var n=t.dispatch,a=t.store,o=a.selectFilesAPIRoot(),i=a.selectEditorContent(),r=a.selectPathname(),l=a.selectAuthToken();console.log("put",e,"existing",r),fetch("".concat(o,"/api").concat(r),{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({content:i,filename:e})}).then((function(e){return e.ok})).then((function(e){e?(console.log("is saving",e),n({type:"EDITOR_PUT_SUCCESS",payload:{isSaving:!1,isEditing:!1}})):n({type:"EDITOR_PUT_ERROR",payload:{isEditing:!1,isSaving:!1,isNew:!0}})})).catch((function(e){console.error(e)})),a.doUpdateUrl("/files/".concat(e))}},doEditorPost:function(e){return function(t){var n=t.dispatch,a=t.store,o=a.selectFilesAPIRoot(),i=a.selectEditorContent(),r=a.selectAuthToken();fetch("".concat(o,"/api/files"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({filename:e,content:i})}).then((function(e){return e.ok})).then((function(e){e?(console.log("is saving",e),n({type:"EDITOR_POST_SUCCESS",payload:{isSaving:!1,isEditing:!1}})):n({type:"EDITOR_POST_ERROR",payload:{err:!0,isSaving:!1}})})).catch((function(e){console.error(e)}))}},doEditorSave:function(e){return function(t){var n=t.dispatch,a=t.store;n({type:"EDITOR_SAVE_STARTED",payload:{isSaving:!0,isEditing:!1,err:null}}),console.log("save",e),a.selectEditorIsNew()?a.doEditorPost(e):a.doEditorPut(e)}},selectEditorIsDeleting:function(e){return e.editor.isDeleting},selectEditorError:function(e){return e.editor.err},selectEditorIsNew:function(e){return e.editor.isNew},selectEditorIsSaving:function(e){return e.editor.isSaving},selectEditorIsNotSaving:function(e){return!e.editor.isSaving},selectEditorContent:function(e){return e.editor.content},selectEditorFilename:function(e){return e.editor.filename},selectEditorIsEditing:function(e){return e.editor.isEditing},persistActions:["EDITOR_ENABLE_DEL","EDITOR_DISABLE_DEL"]},ee="FETCH_LOGIN_SUCCESS",te="FETCH_LOGIN_ERROR",ne="FETCH_LOGOUT_SUCCESS",ae="FETCH_LOGOUT_ERROR",oe={name:"auth",getReducer:function(){var e={apiUrl:"https://corpsmap-dev.sec.usace.army.mil/cwbi/goauth/token/318e650f-6533-4ca6-9cb2-4439941d8dc6",token:null};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0,a=n.type,o=n.payload;switch(a){case ae:case ne:case te:case ee:return Object.assign({},t,o);default:return t}}},doAuthLogin:function(){return function(e){var t=e.dispatch,n=e.store.selectAPIUrl();console.log(n),fetch("".concat(n)).then((function(e){return console.log(e),e.text()})).then((function(e){t({type:ee,payload:{token:e}})}))}},doAuthLogout:function(){return function(e){var t=e.dispatch,n=e.store;t({type:ne,payload:{token:null}}),n.doUpdateUrl("/")}},selectAuthName:Object(l.d)("selectAuthToken",(function(e){if(e){var t=e.split(".");console.log("a",t);var n=JSON.parse(atob(t[1]));return console.log("b",n),n.name}return null})),selectAuthIsLoggedIn:function(e){return!!e.auth.token},selectAPIUrl:function(e){return e.auth.apiUrl},selectAuthToken:function(e){return e.auth.token},persistActions:[ee,ne]},ie=n(152),re=n(328),le=n.n(re),ce={name:"nestedUrl",doUpdateUrlWithHomepage:function(e){return function(t){var n=t.store;if(!ie||!ie.homepage)return n.doUpdateUrl(e);n.doUpdateUrl("".concat(ie.homepage).concat(e))}},selectHomepage:function(e){return ie&&ie.homepage?new le.a(ie.homepage).pathname:""},selectPathnameMinusHomepage:Object(l.d)("selectPathname","selectHomepage",(function(e,t){var n=new RegExp(t);return e.replace(n,"")})),selectPublicFolder:Object(l.d)("selectHomepage",(function(e){return"".concat(e,"/")}))},se=n(329),de="".concat(ie.name,"-").concat(ie.version),ue=Object(se.a)({maxAge:864e5,version:de}),pe=Object(l.a)(q,Z,$,oe,ce,Object(l.b)({cacheFn:ue.set})),Ee=n(330),me=n(809),fe=n(810),he=(n(721),Object(m.b)("doAuthLogout","selectRoute","selectPathname","selectAuthIsLoggedIn",(function(e){var t=e.doAuthLogout,n=e.authIsLoggedIn,a=e.pathname;return o.a.createElement(me.a,{collapseOnSelect:!0,sticky:"top",expand:"lg",bg:"light",className:"navy"},o.a.createElement(me.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),o.a.createElement(me.a.Collapse,{id:"responsive=navbar-nav"},o.a.createElement(fe.a,{className:"nav-container"},o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(fe.a.Link,{className:"navbar-brand ".concat(-1===a.indexOf("/files")?"active":""),href:"/"},"Mapfile Editor")),o.a.createElement("li",null,o.a.createElement(fe.a.Link,{href:"#",onSelect:t,disabled:!n},"Logout")),o.a.createElement("li",null,o.a.createElement(fe.a.Link,{className:"".concat(-1!==a.indexOf("/files"),'\n                      ? " active"\n                      : " "'),href:"/files",disabled:!n},"Editor"))))))}))),ge=Object(m.b)("selectRoute",(function(e){var t=e.route;return o.a.createElement("div",{className:"App"},o.a.createElement(he,null),o.a.createElement(t,null))}));n(722);ue.getAll().then((function(e){var t=pe(e);r.a.render(o.a.createElement(m.a,{store:t},o.a.createElement("div",{onClick:Object(Ee.a)(t.doUpdateUrlWithHomepage)},o.a.createElement(ge,null))),document.getElementById("root"))}))}},[[337,2,3]]]);
//# sourceMappingURL=main.f0c3d705.chunk.js.map